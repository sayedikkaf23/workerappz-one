<app-adminsidebar></app-adminsidebar>
<app-topbar></app-topbar>

<div class="role-page">
  <form #f="ngForm" (ngSubmit)="onSubmit()">
    <div class="full-width">
<h2>{{ isEdit ? 'Edit Admin' : 'Add Admin' }}</h2>
      <a class="back-button" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
      </a>
    </div>

    <div>
      <label for="email">Email<span class="required">*</span></label>
      <input type="email" id="email" [(ngModel)]="email" name="email" required />
    </div>

    <div>
      <label for="password">Password<span class="required">*</span></label>
      <input
        type="password"
        id="password"
        [(ngModel)]="password"
        name="password"
        #passwordField="ngModel"
        required
        pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$"
        minlength="8"
      />
      <div *ngIf="passwordField.touched && passwordField.invalid">
        <small *ngIf="passwordField.errors?.['required']" class="error">Password is required.</small>
        <small *ngIf="passwordField.errors?.['pattern']" class="error">
          Password must be at least 8 characters long and include a Number and a letter.
        </small>
        <small *ngIf="passwordField.errors?.['minlength']" class="error">
          Password must be at least 8 characters long.
        </small>
      </div>
    </div>

    <div>
      <label for="role">Role<span class="required">*</span></label>
      <select id="role" [(ngModel)]="roleid" name="roleid" required>
        <option value="" disabled>Select Role</option>
        <option *ngFor="let r of roles" [value]="r._id">{{ r.role_name }}</option>
      </select>
    </div>

    <div>
      <label for="status">Status<span class="required">*</span></label>
      <select id="status" [(ngModel)]="status" name="status" required>
        <!-- bind real booleans -->
        <option [ngValue]="true">Active</option>
        <option [ngValue]="false">Inactive</option>
      </select>
    </div>

   <button type="submit" >
  {{ isEdit ? (isLoading ? 'Updating...' : 'Update') : (isLoading ? 'Submitting...' : 'Submit') }}
</button>
  </form>
</div>
